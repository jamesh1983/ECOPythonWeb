$def with (username,column_data,his_data,title_name)
<!DOCTYPE html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>铱钶环保</title>
    <link rel="shortcut icon" href="/static/images/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="/static/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="/static/css/site.css" />
    <!--<script src="/static/js/modernizr-2.6.2.js"></script>-->
    <!--<script src="/static/js/respond.js"></script>-->
    <!--<script src="/static/js/jquery-1.10.2.js"></script>-->
    <!--<script src="/static/js/bootstrap-4.4.1.js"></script>-->
    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script>
    <!-- bootstrap.bundle.min.js 用于弹窗、提示、下拉菜单，包含了 popper.min.js -->
    <script src="https://cdn.staticfile.org/popper.js/1.15.0/umd/popper.min.js"></script>
    <!-- 最新的 Bootstrap4 核心 JavaScript 文件 -->
    <script src="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="/static/js/echarts.js"></script>
</head>
<body>
    <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <nav class="navbar-collapse navbar-transparent collapse" role="navigation">
                <ul class="nav navbar-nav">
                    $if (username=='111')|(username=='222'):
                        <li><a href="/?sn=1">一号机组实时数据展示</a></li>
                        <li><a href="/?sn=2">二号机组实时数据展示</a></li>
                        <li><a href="/historical?sn=1">历史数据展示</a></li>
                    $if username=='333':
                        <li><a href="/?sn=3">实时数据展示</a></li>
                        <li><a href="/historical?sn=3">历史数据展示</a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li><a>您好！$username</a></li>
                    <li><a href="logout">登出</a></li>
                </ul>
            </nav>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <form action="historical" method="post" class="form-horizontal">
                <p>
                    <label for="date1">开始日期:</label>
                    <input type="date" name="date1" id="date1">
                    <label for="time1">时间:</label>
                    <input type="time" name="time1" id="time1">
                </p>
                <p>
                    <label for="date2">截止日期:</label>
                    <input type="date" name="date2" id="date2">
                    <label for="time2">时间:</label>
                    <input type="time" name="time2" id="time2">
                </p>
                <label for="select">查询字段名</label>
                <select name="select" id="select">
                    $for name in column_data.values():
                        $if name!="空":
                            <option>$name</option>
                </select>
                $if (username=='111')|(username=='222'):
                    <label for="select2">查询机组</label>
                    <select name="select2" id="select2">
                        <option>鹤淇一号机组</option>
                        <option>鹤淇二号机组</option>
                    </select>
                <button id="Button1" type="submit">查询</button>
            </form>
        </div>
        <h3 align="center" style="color: #d6ecf0;">$title_name</h3>
        <div class="col-sm-12" id="chart1" style="height: 380px; " align="center"></div>
    </div>
        <div class="container body-content">
            <hr />
            <footer>
                <p>&copy; ECOTECH</p>
            </footer>
        </div>

        <script type="text/javascript">
            function today() {
                let d = new Date();
                let currDate = d.getDate();
                let currMonth = d.getMonth() + 1;
                let currYear = d.getFullYear();
                return currYear + "-" + ((currMonth < 10) ? '0' + currMonth : currMonth) + "-" + ((currDate < 10) ? '0' + currDate : currDate);
            }
            function yesterday() {
                let d = new Date();
                let currDate = d.getDate() - 1;
                let currMonth = d.getMonth() + 1;
                let currYear = d.getFullYear();
                return currYear + "-" + ((currMonth < 10) ? '0' + currMonth : currMonth) + "-" + ((currDate < 10) ? '0' + currDate : currDate);
            }
            function nowtime() {
                let d = new Date();
                let hour = d.getHours();
                let Min = d.getMinutes();
                return ((hour < 10) ? '0' + hour : hour) + ":" + ((Min < 10) ? '0' + Min : Min);
            }
            document.getElementById('date1').value = yesterday();
            document.getElementById('date2').value = today();
            document.getElementById('time1').value = nowtime();
            document.getElementById('time2').value = nowtime();
            var myChart1 = echarts.init(document.getElementById('chart1'));
            var option = {
                tooltip: {
                    trigger: 'axis',
                    position: function (pt) {
                        return [pt[0], '10%'];
                    }
                },

                toolbox: {
                    feature: {
                        dataView: {},
                        saveAsImage: {},
                        dataZoom: {},
                        restore: {}
                    }
                },
                xAxis: {
                    type: 'category',
                    data: $his_data["TIMETAG"]
                },
                yAxis: {
                    type: 'value',
                    title: '查询结果'
                },
                series: [
                    {
                        data: $his_data["result"],
                        type: 'line',
                        smooth: true
                    }
                ]
            };
            myChart1.setOption(option);
        </script>
</body>
